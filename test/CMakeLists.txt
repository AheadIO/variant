cmake_minimum_required(VERSION 2.8)

add_definitions(-std=c++14)
add_definitions(-Werror)
add_definitions(-Weverything)

add_definitions(-Wno-c++98-compat)
add_definitions(-Wno-c++98-compat-pedantic)
add_definitions(-Wno-deprecated)
add_definitions(-Wno-documentation-unknown-command)
add_definitions(-Wno-global-constructors)
add_definitions(-Wno-missing-noreturn)
add_definitions(-Wno-missing-prototypes)
add_definitions(-Wno-old-style-cast)
add_definitions(-Wno-padded)
add_definitions(-Wno-shift-sign-overflow)
add_definitions(-Wno-undef)
add_definitions(-Wno-unneeded-member-function)
add_definitions(-Wno-used-but-marked-unused)
add_definitions(-Wno-weak-vtables)

function(add_test_case name)
  add_executable(${name}.test ${name}.test.cpp)
  target_link_libraries(${name}.test gtest gtest_main pthread)
  add_test(${name} ${name}.test)
endfunction(add_test_case)

add_test_case(apply)
add_test_case(assign.ref)
add_test_case(assign.val)
add_test_case(cnstr.diamond)
add_test_case(cnstr.ref)
add_test_case(cnstr.val)
add_test_case(dtor)
add_test_case(get)
add_test_case(hash)
add_test_case(intro)
add_test_case(swap)
